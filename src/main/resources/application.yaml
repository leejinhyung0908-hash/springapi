spring:
  application:
    name: api
  server:
    port: 8080
  main:
    web-application-type: servlet  # MVC 모드 명시
  data:
    redis:
      # Upstash Redis 설정
      url: ${UPSTASH_REDIS_URL:}
      password: ${UPSTASH_REDIS_TOKEN:}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
    # Neon DB (PostgreSQL) 설정
    jpa:
      hibernate:
        ddl-auto: update
      show-sql: false
      properties:
        hibernate:
          dialect: org.hibernate.dialect.PostgreSQLDialect
          format_sql: true
  datasource:
    url: ${NEON_DB_URL:}
    username: ${NEON_DB_USERNAME:}
    password: ${NEON_DB_PASSWORD:}
    driver-class-name: org.postgresql.Driver
    hikari:
      maximum-pool-size: 10
      minimum-idle: 5
      connection-timeout: 30000

# Auth 설정
kakao:
  rest-api-key: ${KAKAO_REST_API_KEY:}
  redirect-uri: ${KAKAO_REDIRECT_URI:http://localhost:8080/api/auth/kakao/callback}
  client-secret: ${KAKAO_CLIENT_SECRET:}

naver:
  client-id: ${NAVER_CLIENT_ID:}
  client-secret: ${NAVER_CLIENT_SECRET:}
  redirect-uri: ${NAVER_REDIRECT_URI:http://localhost:8080/api/auth/naver/callback}

google:
  client-id: ${GOOGLE_CLIENT_ID:}
  client-secret: ${GOOGLE_CLIENT_SECRET:}
  redirect-uri: ${GOOGLE_REDIRECT_URI:http://localhost:8080/api/auth/google/callback}
  
jwt:
  secret: ${JWT_SECRET:default-secret-key-change-in-production-min-32-characters}
  expiration: ${JWT_EXPIRATION:86400000} # 기본 24시간 (밀리초)
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000} # 기본 7일 (밀리초)

frontend:
  login-callback-url: ${FRONT_LOGIN_CALLBACK_URL:http://localhost:3000}
  login-success-path: ${FRONT_LOGIN_SUCCESS_PATH:/}

cookie:
  secure: ${COOKIE_SECURE:false}  # 개발: false, 프로덕션: true (HTTPS 필수)
  same-site: ${COOKIE_SAME_SITE:Lax}  # Lax, Strict, None


# Actuator 설정
management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus
  endpoint:
    health:
      show-details: when-authorized
  health:
    redis:
      enabled: false  # Redis가 없어도 헬스 체크는 성공하도록

# Swagger / Springdoc 설정
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /docs
    enabled: true
    try-it-out-enabled: true
    operations-sorter: method
    tags-sorter: alpha

